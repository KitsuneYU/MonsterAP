<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monster Calculator</title>
	<script>
		const RACE = 0;
		const HNAME = 1;
		const SOFTCAP = 2;
		const RATE = 3;
		const data = [
			['人間', 'ビラーギ山塞', 753, 5],
			['亜人', '祭壇インプ生息地', 753, 5],
			['人間', '廃城跡', 774, 5],
			['亜人', '沼フォガン生息地', 803, 5],
			['亜人', '湿原ナーガ生息地', 803, 5],
			['亜人', 'オークキャンプ', 856, 5],
			['人間', 'ブラッディ修道院', 856, 5],
			['亜人', '星の墓場', 470, 70],
			['人間', '放棄された修道院', 490, 70],
			['人間', 'パディクス島', 530, 70],
			['亜人', 'サウニールキャンプ', 813, 5],
			['亜人', 'ルツム駐屯地', 835, 5],
			['人間', 'ジャイアント族駐屯地', 856, 5],
			['動物', 'ヘッセ聖域', 898, 5],
			['亜人', 'トロル生息地', 920, 5],
			['カーマス', '[デキア] オルン渓谷', 1000, 70],
			['カーマス', 'オルン渓谷', 830, 70],
			['カーマス', '苦悩が眠る墓', 830, 70],
			['カーマス', '[デキア] ツンクタ', 950, 30],
			['カーマス', '灰色の森', 830, 70],
			['カーマス', '[デキア] 灰色の森', 1000, 70]
		];
		const icon_data = {
			'人間': 'https://imgur.com/IQtyWxm.png',
			'亜人': 'https://imgur.com/MJ9vR5W.png',
			'動物': 'https://imgur.com/w2ZsxWH.png',
			'カーマス': 'https://imgur.com/wDqctc4.png',
		};
	</script>
</head>
<body>
    <h1>Monster Calculator</h1>
    <form id="monsterForm">
        <label for="hunt">狩場：</label>
        <select id="hunt" name="hunt" onchange="recalc();">	
        </select><br><br>
        <label for="monsterAP">モンスターAP：</label>
        <input type="number" id="monsterAP" name="monsterAP" value="1000" onchange="recalc();"><br><br>
        <label for="attack">種族攻撃力：</label>
        <input type="number" id="attack" name="attack" value="1" onchange="recalc();"><br><br>
		<label>種族：</label><img id="race_img" src="" /><label id="race_text"></label><br />
		<label>ソフトキャップ：</label>
		<label id="softcap"></label><br />
		<label>理論攻撃力：</label>
		<label id="ap"></label><br />
        <!--<input type="submit" value="計算">-->
    </form>
	<script>
		var sel = document.getElementById("hunt");
		for (var i=0; i<data.length; i++)
		{
			var op = document.createElement("option");
			op.text = data[i][HNAME] + " (" + data[i][RACE] + ")";
			op.value = i;
			sel.append(op);
		}
		
		var softcap = document.getElementById("softcap");
		var ap = document.getElementById("ap");
		var icon_c = document.getElementById("race_img");
		var race_text_c = document.getElementById("race_text");
		var mon_ap = document.getElementById("monsterAP");
		var race_ap = document.getElementById("attack");
		
		recalc();
		
		function recalc()
		{
			var cur = sel.value;
			var val = data[cur];
			softcap.innerHTML = '<font color="red">' + val[SOFTCAP] + '</font>';
			var base_ap = val[SOFTCAP];
			var over_ap = mon_ap.value - base_ap;
			if (over_ap > 0)
			{
				over_ap *= val[RATE];
				over_ap /= 100;
			}
			var final_ap = base_ap + over_ap + race_ap.value * 0.8;
			final_ap = Math.floor(final_ap);
			ap.innerHTML = '<font color="red">' + final_ap + '</font>';
			icon_c.src = icon_data[val[RACE]];
			race_text_c.innerHTML = '<font color="red">' + val[RACE] + '</font>';
		}
	</script>
</body>
</html>
